SHELLY_HOST=192.168.1.50
SHELLY_TIMEOUT_MS=5000

POLL_LIVE_SECONDS=10
POLL_INTERVAL_DATA_SECONDS=300
EM_DATA_ID=0
EMDATA_LOOKBACK_RECORDS=720

# External DB (Neon/MyDevil/Synology)
# Example:
# DATABASE_URL=postgresql://USER:PASSWORD@HOSTNAME/DBNAME?sslmode=require
DATABASE_URL=postgresql://USER:PASSWORD@HOSTNAME/DBNAME?sslmode=require

ALERT_POWER_W=4500
ALERT_SUSTAIN_SECONDS=120
ALERT_COOLDOWN_SECONDS=900
ALERT_TRIGGER_SECONDS=15

# HTTP trigger options (homebridge-http-webhooks)
# Use explicit on/off URLs with state=true/false
TRIGGER_HTTP_ON_URL=http://homebridge.local:51828/?accessoryId=power_alert&state=true
TRIGGER_HTTP_OFF_URL=http://homebridge.local:51828/?accessoryId=power_alert&state=false
TRIGGER_HTTP_METHOD=GET
TEST_TRIGGER_TOKEN=

# Optional base URL with {state} token
# TRIGGER_HTTP_URL=http://homebridge.local:51828/?accessoryId=power_alert&state={state}

HEALTHZ_PORT=8080

# Retention
# Downsample raw readings older than X hours into power_readings_1m
RETENTION_DOWNSAMPLE_AFTER_HOURS=168
# Low-res bucket size in minutes for power_readings_1m
RETENTION_LOW_RES_MINUTES=1
# Optional: delete low-res rows older than N days
# RETENTION_LOW_RES_MAX_DAYS=365
# Optional: delete interval rows older than N days (energy_intervals)
# RETENTION_INTERVAL_MAX_DAYS=730
# Run retention loop every N seconds
RETENTION_RUN_SECONDS=3600
# Optional: prune oldest rows (raw + low-res) when DB grows beyond this size (MB)
# RETENTION_MAX_DB_MB=500
# Optional: include energy_intervals in size-cap pruning
# RETENTION_PRUNE_INCLUDE_INTERVALS=false
RETENTION_PRUNE_BATCH=20000
RETENTION_MAX_PRUNE_ITERATIONS=20
